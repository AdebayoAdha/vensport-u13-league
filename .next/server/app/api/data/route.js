"use strict";(()=>{var e={};e.id=827,e.ids=[827],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},2254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},7261:e=>{e.exports=require("node:util")},3998:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>m,originalPathname:()=>k,patchFetch:()=>x,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>g,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>h});var s={};a.r(s),a.d(s,{GET:()=>w,POST:()=>p});var r=a(5419),n=a(9108),i=a(9678),o=a(8070),u=a(2982);let c=new(a(4424)).KU({token:process.env.QSTASH_TOKEN});async function d(e,t){return await c.publishJSON({url:`${process.env.VERCEL_URL||"http://localhost:3000"}/api/jobs/fixture-reminder`,delay:t,body:{fixtureId:e}})}async function l(e){return await c.publishJSON({url:`${process.env.VERCEL_URL||"http://localhost:3000"}/api/jobs/news-notification`,body:{newsId:e}})}async function w(e){let{searchParams:t}=new URL(e.url),a=t.get("type");try{switch(a){case"teams":return o.Z.json(await u.K.getTeams());case"fixtures":return o.Z.json(await u.K.getFixtures());case"news":return o.Z.json(await u.K.getNews());case"users":return o.Z.json(await u.K.getUsers());case"defaultRound":return o.Z.json({value:await u.K.getDefaultRound()});default:return o.Z.json({error:"Invalid type"},{status:400})}}catch(e){return o.Z.json({error:"Failed to fetch data"},{status:500})}}async function p(e){let{type:t,data:a}=await e.json();try{switch(t){case"teams":await u.K.setTeams(a);break;case"fixtures":for(let e of(await u.K.setFixtures(a),a))if(!e.homeScore&&!e.awayScore){let t=new Date(e.date+" "+e.time).getTime()-Date.now()-864e5;t>0&&await d(e.id,t)}break;case"news":await u.K.setNews(a);let e=await u.K.getNews();for(let t of a.filter(t=>!e.find(e=>e.story===t.story)))await l(t.story);break;case"users":await u.K.setUsers(a);break;case"defaultRound":await u.K.setDefaultRound(a);break;default:return o.Z.json({error:"Invalid type"},{status:400})}return o.Z.json({success:!0})}catch(e){return o.Z.json({error:"Failed to save data"},{status:500})}}let f=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/data/route",pathname:"/api/data",filename:"route",bundlePath:"app/api/data/route"},resolvedPagePath:"/Users/Adha/Documents/Some Work/Sport website/my-react-app/app/api/data/route.ts",nextConfigOutput:"export",userland:s}),{requestAsyncStorage:y,staticGenerationAsyncStorage:v,serverHooks:g,headerHooks:m,staticGenerationBailout:h}=f,k="/api/data/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:v})}},2982:(e,t,a)=>{a.d(t,{K:()=>r});var s=a(4409);class r{static async getTeams(){return await s.kv.get("teams")||[]}static async setTeams(e){await s.kv.set("teams",e)}static async getFixtures(){return await s.kv.get("fixtures")||[]}static async setFixtures(e){await s.kv.set("fixtures",e)}static async getNews(){return await s.kv.get("newsStories")||[]}static async setNews(e){await s.kv.set("newsStories",e)}static async getUsers(){return await s.kv.get("users")||[]}static async setUsers(e){await s.kv.set("users",e)}static async getDefaultRound(){return await s.kv.get("defaultRound")||"1"}static async setDefaultRound(e){await s.kv.set("defaultRound",e)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,936],()=>a(3998));module.exports=s})();