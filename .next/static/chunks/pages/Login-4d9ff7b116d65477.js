(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{5285:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Login",function(){return r(8677)}])},8677:function(e,s,r){"use strict";r.r(s);var a=r(5893),t=r(7294),o=r(1008);s.default=function(){let[e,s]=(0,t.useState)(!0),[r,n]=(0,t.useState)({}),[l,i]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),u=e=>{n({...r,[e.target.name]:e.target.value})};return(0,a.jsxs)("section",{className:"section",children:[(0,a.jsxs)("div",{className:"auth-card",children:[(0,a.jsxs)("div",{className:"auth-toggle",children:[(0,a.jsx)("button",{className:e?"active":"",onClick:()=>s(!0),children:"Login"}),(0,a.jsx)("button",{className:e?"":"active",onClick:()=>s(!1),children:"Sign Up"})]}),(0,a.jsx)("h2",{children:e?"Login":"Sign Up"}),l&&(0,a.jsx)("p",{className:"auth-message",children:l}),(0,a.jsxs)("form",{className:"login-form",onSubmit:a=>{a.preventDefault(),i("");try{if(e){let e=o.O.login(r);i("Login successful!"),setTimeout(()=>{window.location.href=e.redirectTo},1e3)}else o.O.register(r),i("Registration successful!"),s(!0)}catch(e){i(e.message)}},children:[!e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",name:"fullName",placeholder:"Full Name",onChange:u,required:!0}),(0,a.jsxs)("select",{name:"role",onChange:u,required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Role"}),(0,a.jsx)("option",{value:"coach",children:"Coach"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",onChange:u,required:!0}),(0,a.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:u,required:!0}),!e&&(0,a.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:u,required:!0}),(0,a.jsx)("button",{type:"submit",children:e?"Login":"Sign Up"})]}),(0,a.jsxs)("p",{className:"auth-switch",children:[e?"Don't have an account? ":"Already have an account? ",(0,a.jsx)("span",{onClick:()=>s(!e),children:e?"Sign Up":"Login"})]}),e&&(0,a.jsx)("p",{className:"auth-switch",children:(0,a.jsx)("span",{onClick:()=>d(!0),children:"Forgot Password?"})})]}),c&&(0,a.jsx)("div",{className:"forgot-password-modal",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsx)("h3",{children:"Reset Password"}),(0,a.jsx)("p",{children:"Enter your email to reset your password:"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",onChange:e=>n({...r,resetEmail:e.target.value})}),(0,a.jsxs)("div",{className:"modal-actions",children:[(0,a.jsx)("button",{onClick:()=>{if(!r.resetEmail){i("Please enter your email address.");return}try{o.O.resetPassword(r.resetEmail),i("Password reset successful! Your new password is: newpass123"),d(!1)}catch(e){i(e.message)}},children:"Reset Password"}),(0,a.jsx)("button",{onClick:()=>d(!1),children:"Cancel"})]})]})})]})}},1008:function(e,s,r){"use strict";r.d(s,{O:function(){return a}});let a={register:e=>{let{fullName:s,email:r,password:a,confirmPassword:t,role:o="coach"}=e;if(a!==t)throw Error("Passwords do not match");let n=JSON.parse(localStorage.getItem("users")||"[]"),l=n.find(e=>e.email===r);if(l&&l.password)throw Error("User already exists");if(l&&l.needsPasswordSetup)return l.password=a,l.needsPasswordSetup=!1,s&&(l.fullName=s),localStorage.setItem("users",JSON.stringify(n)),{success:!0,message:"Account setup successful"};let i={id:Date.now(),fullName:s,email:r,password:a,role:o,createdAt:new Date().toISOString()};return n.push(i),localStorage.setItem("users",JSON.stringify(n)),{success:!0,message:"Registration successful"}},login:e=>{let s;let{email:r,password:a}=e,t=JSON.parse(localStorage.getItem("users")||"[]").find(e=>e.email===r);if(!t)throw Error("Invalid email or password");if(t.needsPasswordSetup)throw Error("Account needs setup. Please register to set your password.");if(t.password!==a)throw Error("Invalid email or password");if(t.suspended)throw Error("Account suspended. Contact administrator.");if("coach"===t.role){let e=JSON.parse(localStorage.getItem("teams")||"[]").find(e=>e.teamEmail===t.email||e.coachEmail===t.email);e&&(t.teamName=e.teamName,t.teamData=e)}return localStorage.setItem("currentUser",JSON.stringify(t)),s="admin"===t.role?"/admin-dashboard":"/team-dashboard",{success:!0,user:t,redirectTo:s}},logout:()=>(localStorage.removeItem("currentUser"),{success:!0}),getCurrentUser:()=>JSON.parse(localStorage.getItem("currentUser")||"null"),isAuthenticated:()=>!!localStorage.getItem("currentUser"),hasRegisteredTeam:()=>{let e=JSON.parse(localStorage.getItem("currentUser")||"null");return!!e&&"admin"!==e.role&&JSON.parse(localStorage.getItem("teams")||"[]").some(s=>s.coachEmail===e.email||s.teamEmail===e.email)},resetPassword:e=>{let s=JSON.parse(localStorage.getItem("users")||"[]"),r=s.findIndex(s=>s.email===e);if(-1===r)throw Error("Email not found");return s[r].password="newpass123",s[r].needsPasswordSetup=!1,localStorage.setItem("users",JSON.stringify(s)),{success:!0,message:"Password reset successful"}}}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5285)}),_N_E=e.O()}]);