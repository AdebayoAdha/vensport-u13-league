(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{600:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Results",function(){return a(9565)}])},9565:function(e,s,a){"use strict";a.r(s);var t=a(5893),r=a(7294),l=a(1008);s.default=function(){let[e,s]=(0,r.useState)([]),[a,n]=(0,r.useState)("all"),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("fixtures")||"[]");s(e);let a=l.O.getCurrentUser(),t=(null==a?void 0:a.role)==="admin";o(t);let r=localStorage.getItem("defaultRound")||"all";d(r),t?n(r):n([...new Set(e.map(e=>e.round))].sort((e,s)=>e-s)[0]||"1")},[]);let u="all"===a?e:e.filter(e=>e.round===parseInt(a)),m=[...new Set(e.map(e=>e.round))].sort((e,s)=>e-s);return(0,t.jsxs)("section",{className:"section",children:[(0,t.jsx)("h2",{children:"Fixtures & Results"}),(0,t.jsx)("div",{className:"round-filter",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("select",{value:a,onChange:e=>n(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Rounds"}),m.map(e=>(0,t.jsxs)("option",{value:e,children:["Round ",e]},e))]}),(0,t.jsx)("button",{className:"set-default-btn",onClick:()=>{localStorage.setItem("defaultRound",a),d(a),alert("Default round updated successfully!")},title:"Set this round as default for all users",children:"Set as Default"})]}):(0,t.jsx)("select",{value:a,onChange:e=>n(e.target.value),children:m.map(e=>(0,t.jsxs)("option",{value:e,children:["Round ",e]},e))})}),i&&(0,t.jsx)("div",{className:"admin-info",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Current default round:"})," ","all"===c?"All Rounds":"Round ".concat(c)]})}),0===u.length?(0,t.jsx)("p",{children:"No fixtures available yet."}):(0,t.jsx)("div",{className:"fixtures-list",children:Object.entries(u.reduce((e,s)=>{let a=s.round||"Manual";return e[a]||(e[a]=[]),e[a].push(s),e},{})).sort((e,s)=>{let[a]=e,[t]=s;return"Manual"===a?1:"Manual"===t?-1:parseInt(a)-parseInt(t)}).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"round-section",children:[(0,t.jsxs)("h3",{className:"round-title",children:["Round ",s]}),(0,t.jsx)("div",{className:"round-fixtures",children:a.map((e,s)=>{var a,r,l,n;return(0,t.jsxs)("div",{className:"fixture-card",children:[(0,t.jsxs)("div",{className:"fixture-teams",children:[(0,t.jsx)("span",{className:"home-team",children:e.homeTeam}),(0,t.jsx)("span",{className:"vs",children:"vs"}),(0,t.jsx)("span",{className:"away-team",children:e.awayTeam})]}),(0,t.jsxs)("div",{className:"fixture-details",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Date:"})," ",e.date||"TBD"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Time:"})," ",e.time||"TBD"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Venue:"})," ",e.venue||"TBD"]})]}),void 0!==e.homeScore?(0,t.jsxs)("div",{className:"fixture-result",children:[(0,t.jsxs)("span",{className:"result",children:[e.homeScore," - ",e.awayScore]}),(0,t.jsx)("span",{className:"status",children:e.forfeit?"Forfeit":"Final"}),e.forfeit&&(0,t.jsx)("div",{className:"cancel-reason",children:e.cancelReason}),((null===(a=e.homeGoals)||void 0===a?void 0:a.length)>0||(null===(r=e.awayGoals)||void 0===r?void 0:r.length)>0)&&(0,t.jsxs)("div",{className:"match-details",children:[null===(l=e.homeGoals)||void 0===l?void 0:l.map((s,a)=>(0,t.jsxs)("div",{className:"goal-detail",children:[(0,t.jsxs)("strong",{children:[e.homeTeam,":"]})," ",s.scorer," ",s.time,s.assist&&(0,t.jsxs)("span",{className:"assist",children:[" (Assist: ",s.assist,")"]})]},a)),null===(n=e.awayGoals)||void 0===n?void 0:n.map((s,a)=>(0,t.jsxs)("div",{className:"goal-detail",children:[(0,t.jsxs)("strong",{children:[e.awayTeam,":"]})," ",s.scorer," ",s.time,s.assist&&(0,t.jsxs)("span",{className:"assist",children:[" (Assist: ",s.assist,")"]})]},a)),(e.homeCleanSheet||e.awayCleanSheet)&&(0,t.jsxs)("div",{className:"cleansheet-details",children:[e.homeCleanSheet&&(0,t.jsxs)("div",{className:"cleansheet",children:["\uD83E\uDD45 ",e.homeTeam,": ",e.homeCleanSheet]}),e.awayCleanSheet&&(0,t.jsxs)("div",{className:"cleansheet",children:["\uD83E\uDD45 ",e.awayTeam,": ",e.awayCleanSheet]})]})]})]}):(0,t.jsx)("div",{className:"fixture-status",children:(0,t.jsx)("span",{className:"status scheduled",children:"Scheduled"})})]},s)})})]},s)})})]})}},1008:function(e,s,a){"use strict";a.d(s,{O:function(){return t}});let t={register:e=>{let{fullName:s,email:a,password:t,confirmPassword:r,role:l="coach"}=e;if(t!==r)throw Error("Passwords do not match");let n=JSON.parse(localStorage.getItem("users")||"[]"),i=n.find(e=>e.email===a);if(i&&i.password)throw Error("User already exists");if(i&&i.needsPasswordSetup)return i.password=t,i.needsPasswordSetup=!1,s&&(i.fullName=s),localStorage.setItem("users",JSON.stringify(n)),{success:!0,message:"Account setup successful"};let o={id:Date.now(),fullName:s,email:a,password:t,role:l,createdAt:new Date().toISOString()};return n.push(o),localStorage.setItem("users",JSON.stringify(n)),{success:!0,message:"Registration successful"}},login:e=>{let s;let{email:a,password:t}=e,r=JSON.parse(localStorage.getItem("users")||"[]").find(e=>e.email===a);if(!r)throw Error("Invalid email or password");if(r.needsPasswordSetup)throw Error("Account needs setup. Please register to set your password.");if(r.password!==t)throw Error("Invalid email or password");if(r.suspended)throw Error("Account suspended. Contact administrator.");if("coach"===r.role){let e=JSON.parse(localStorage.getItem("teams")||"[]").find(e=>e.teamEmail===r.email||e.coachEmail===r.email);e&&(r.teamName=e.teamName,r.teamData=e)}return localStorage.setItem("currentUser",JSON.stringify(r)),s="admin"===r.role?"/admin-dashboard":"/team-dashboard",{success:!0,user:r,redirectTo:s}},logout:()=>(localStorage.removeItem("currentUser"),{success:!0}),getCurrentUser:()=>JSON.parse(localStorage.getItem("currentUser")||"null"),isAuthenticated:()=>!!localStorage.getItem("currentUser"),hasRegisteredTeam:()=>{let e=JSON.parse(localStorage.getItem("currentUser")||"null");return!!e&&"admin"!==e.role&&JSON.parse(localStorage.getItem("teams")||"[]").some(s=>s.coachEmail===e.email||s.teamEmail===e.email)},resetPassword:e=>{let s=JSON.parse(localStorage.getItem("users")||"[]"),a=s.findIndex(s=>s.email===e);if(-1===a)throw Error("Email not found");return s[a].password="newpass123",s[a].needsPasswordSetup=!1,localStorage.setItem("users",JSON.stringify(s)),{success:!0,message:"Password reset successful"}}}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=600)}),_N_E=e.O()}]);